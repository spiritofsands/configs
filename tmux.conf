# Get rid of default keys
unbind-key 'p'
unbind-key 'n'
unbind-key '['
unbind-key ']'
unbind-key 'y'
unbind-key 'C-b'
unbind-key '"'
unbind-key '%'
unbind-key ','
unbind-key '$'
unbind-key Up
unbind-key Down
unbind-key Left
unbind-key Right
unbind-key -T copy-mode-vi Up
unbind-key -T copy-mode-vi Down
unbind-key -T copy-mode-vi Left
unbind-key -T copy-mode-vi Right
unbind-key C-Up
unbind-key C-Down
unbind-key C-Left
unbind-key C-Right


# prefix key
set-option -g prefix 'C-space'
bind-key 'C-space' send-prefix

# Time in milliseconds for which tmux waits after an escape is input
set-option -g escape-time 0

# Allow commands to be entered without pressing the prefix-key again
set-option -g repeat-time 250

# Use vim-like keys
set-option -g mode-keys vi

# Attempt to set the terminal clipboard content (messes the screen)
set-option -g set-clipboard off

# Copy to Xorg bindings
bind-key 'C-y' run "tmux save-buffer - | xsel -ib"\; display-message 'Copied'
#bind-key 'C-p' run "tmux set-buffer \"$(xsel -ob)\"; tmux paste-buffer"\; display-message 'Pasted'

# Rename keys
bind-key 'r' command-prompt -p 'Rename window:' -I '#{window_name}' 'rename-window %1'
bind-key 'R' command-prompt -p 'Rename session:' -I '#{session_name}' 'rename-session %1'

# Zoom
bind-key -n 'M-z' resize-pane -Z

# Vim copy keys
bind-key 'Escape' copy-mode
bind-key 'p' paste-buffer
bind-key -T copy-mode-vi 'v' send-keys -X begin-selection
bind-key -T copy-mode-vi 'y' send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi 'Y' send-keys -X copy-selection # do not close copy-mode
bind-key -T copy-mode-vi 'C-v' send-keys -X rectangle-toggle
bind-key 'y' copy-mode\; send-keys 'Vh'\; send-keys 'y'\; display-message 'Copied line'
bind-key 'v' copy-mode\; send-keys 'v'

# Use Alt-hjkl keys to switch panes
bind-key -n 'M-h' select-pane -L
bind-key -n 'M-l' select-pane -R
bind-key -n 'M-k' select-pane -U
bind-key -n 'M-j' select-pane -D
bind-key 'h' select-pane -L
bind-key 'l' select-pane -R
bind-key 'k' select-pane -U
bind-key 'j' select-pane -D


# vim-like pane resizing
bind-key -r C-k resize-pane -U
bind-key -r C-j resize-pane -D
bind-key -r C-h resize-pane -L
bind-key -r C-l resize-pane -R

# Switch windows
set-option  -g base-index 1
set-option -wg pane-base-index 1

bind-key -n 'C-M-h' previous-window
bind-key -n 'C-M-l' next-window
bind-key -n 'M-1' select-window -t 1
bind-key -n 'M-2' select-window -t 2
bind-key -n 'M-3' select-window -t 3
bind-key -n 'M-q' select-window -t 4
bind-key -n 'M-w' select-window -t 5
bind-key -n 'M-e' select-window -t 6
bind-key -n 'M-a' select-window -t 7
bind-key -n 'M-s' select-window -t 8
bind-key -n 'M-d' select-window -t 9
bind-key -n 'M-z' select-window -t 10
bind-key -n 'M-x' select-window -t 11
bind-key -n 'M-c' select-window -t 12

# Maximum number of lines held in window history
set-option -g history-limit 50000

# Status bar
set-option -g status-position top
set-option -g status-bg colour236
set-option -g status-fg white
set-option -g status-left ''

set-option -g status-right "#(tmux-print-sessions.sh #{s/$//:session_id}:#{session_name})"
set-option -g status-right-fg white
set-option -g status-right-bg colour236

set-option -g window-status-format " #I:#W "
set-option -g window-status-current-format " #I:#W#{?window_zoomed_flag,*,} "
set-option -g window-status-current-fg colour15
set-option -g window-status-current-bg colour72

set-option -g pane-active-border-bg colour72
set-option -g pane-active-border-fg colour72
set-option -g pane-border-fg colour72

# Monitor for activity in the window
set-window-option -g monitor-activity

# Jump to the next session
bind-key 'F1' switch-client -t $0
bind-key 'F2' switch-client -t $1
bind-key 'F3' switch-client -t $2
bind-key 'F4' switch-client -t $3
bind-key 'F5' switch-client -t $4
bind-key 'F6' switch-client -t $5
bind-key 'F7' switch-client -t $6
bind-key 'F8' switch-client -t $7
bind-key 'F9' switch-client -t $8

# Split panes and save paths
bind-key '\' split-window -h -c '#{pane_current_path}'
bind-key '-' split-window -v -c '#{pane_current_path}'
bind-key 'c' new-window -c '#{pane_current_path}'

# save buffer
bind-key 'P' command-prompt -p 'save history to filename:' -I '~/tmux.history' 'capture-pane -S -50000 ; save-buffer %1 ; delete-buffer'

# set window titles
#set -g set-titles on
#set -g set-titles-string '#S'
#setw -g automatic-rename

# plugins
set-option -g @plugin 'tmux-plugins/tpm'

set-option -g @plugin 'tmux-plugins/tmux-resurrect'
set-option -g @resurrect-capture-pane-contents 'on'

set-option -g @plugin 'tmux-plugins/tmux-continuum'
set-option -g @continuum-restore 'off'
set-option -g @continuum-save-interval '5'

# Initialize TMUX plugin manager(keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
